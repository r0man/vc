{"id":"vc-245","title":"Auto-cleanup sandbox on mission close","description":"Automatically call CleanupMissionSandbox() when a mission epic is closed.\n\nCURRENT:\n- Sandboxes are manually cleaned up\n- No automatic cleanup on mission completion\n\nNEEDED:\n- After executor completes a task, check if mission epic is complete (IsEpicComplete)\n- If mission complete, call CleanupMissionSandbox()\n- Remove worktree and branch\n- Clear sandbox metadata\n\nINTEGRATION POINT:\n- result_processor.go processes task completion\n- Already has epic completion checking logic (vc-235)\n- Add sandbox cleanup after epic complete detection\n\nThis ensures sandboxes are automatically cleaned up when missions complete, preventing disk bloat.","acceptance_criteria":"- Executor checks IsEpicComplete() after task execution\n- If mission complete, calls CleanupMissionSandbox()\n- Sandbox is removed after mission close\n- Tests verify auto-cleanup on mission completion\n- Tests verify sandbox persists if mission not complete\n- Manual cleanup command still works (vc cleanup sandboxes)","notes":"Implemented auto-cleanup sandbox on mission close. Changes:\n- Added sandboxManager field to ResultsProcessor struct and config\n- Modified checkEpicCompletion() to accept sandboxManager parameter\n- Created cleanupMissionSandboxIfComplete() function that checks if closed epic is a mission and cleans up its sandbox\n- Updated result_processor.go to pass sandboxManager when checking epic completion\n- Updated executor_execution.go to pass sandboxManager to results processor config\n- Added tests in epic_sandbox_cleanup_test.go verifying:\n  * Sandboxes are auto-cleaned when missions complete\n  * Sandboxes persist when missions are incomplete\n\nIntegration point: After a task completes, result_processor.go calls checkEpicCompletion() which now checks if parent epic is a mission and cleans up sandbox if mission is complete.\n\nManual cleanup command (vc cleanup sandboxes) still works as before.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-28T22:03:19.156342-07:00","updated_at":"2025-10-29T11:40:34.197245-07:00","closed_at":"2025-10-29T11:40:34.197245-07:00","dependencies":[{"issue_id":"vc-245","depends_on_id":"vc-217","type":"parent-child","created_at":"2025-10-28T22:04:15.012996-07:00","created_by":"stevey"},{"issue_id":"vc-245","depends_on_id":"vc-243","type":"blocks","created_at":"2025-10-28T22:04:55.624172-07:00","created_by":"stevey"},{"issue_id":"vc-245","depends_on_id":"vc-244","type":"blocks","created_at":"2025-10-28T22:05:01.557555-07:00","created_by":"stevey"}]}
